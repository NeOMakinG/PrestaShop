 {#**
 * 2007-2020 PrestaShop SA and Contributors
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://www.prestashop.com for more information.
 *
 * @author    PrestaShop SA <contact@prestashop.com>
 * @copyright 2007-2020 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 * International Registered Trademark & Property of PrestaShop SA
 *#}
{% extends '@PrestaShop/Admin/layout.html.twig' %}

{% block content %}
  <form name="form" id="form" method="post" class="form-horizontal product-page row justify-content-md-center" novalidate="novalidate">

    {% if not editable %} <fieldset disabled id="field-disabled"> {% endif %}
    {# PRODUCT HEADER #}
    {% block product_header %}
      {{ include('@Product/ProductPage/Blocks/header.html.twig', {
        'formName': form.step1.name,
        'formType': form.step1.type_product,
        'is_multishop_context': is_multishop_context,
        'languages': languages,
        'help_link': help_link,
        'stats_link': stats_link
        })
      }}
    {% endblock %}

    <div id="product-app" class="col-xxl-10"> 
      <h1>The VueJS Product App</h1>

      {% block product_tabs_container_poc %}
        {{ include('@Product/ProductPage/Blocks/Vue/tabs.vue.twig') }}
      {% endblock %}

      {# PANEL ESSENTIALS #}
      {% block product_panel_essentials %}
        {% set formQuantityShortcut = form.step1.qty_0_shortcut is defined ? form.step1.qty_0_shortcut : null  %}
        {{ include('@Product/ProductPage/Panels/Vue/essentials.vue.twig', {
            'formPackItems': form.step1.inputPackItems,
            'productId': id_product,
            'images': form.step1.vars.value.images,
            'formShortDescription': form.step1.description_short,
            'formDescription': form.step1.description,
            'formFeatures': form.step1.features,
            'formManufacturer': form.step1.id_manufacturer,
            'formRelatedProducts': form.step1.related_products,
            'is_combination_active': is_combination_active,
            'has_combinations': has_combinations,
            'formReference': form.step6.reference,
            'formQuantityShortcut': formQuantityShortcut,
            'formPriceShortcut': form.step1.price_shortcut,
            'formPriceShortcutTTC': form.step1.price_ttc_shortcut,
            'formCategories': form.step1,
          })
        }}
      {% endblock %}

      {# PANEL COMBINATIONS #}
      {% block product_panel_combinations %}
        {% set formStockQuantity = form.step3.qty_0 is defined ? form.step3.qty_0 : null  %}
        {{ include('@Product/ProductPage/Panels/Vue/combinations.vue.twig', {
            'formDependsOnStocks': form.step3.depends_on_stock,
            'productId': id_product,
            'formStockQuantity': formStockQuantity,
            'formStockMinimalQuantity': form.step3.minimal_quantity,
            'formLowStockThreshold': form.step3.low_stock_threshold,
            'formLocation': form.step3.location,
            'formLowStockAlert': form.step3.low_stock_alert,
            'formVirtualProduct': form.step3.virtual_product,
            'asm_globally_activated': asm_globally_activated,
            'formType': form.step1.type_product,
            'formAdvancedStockManagement': form.step3.advanced_stock_management,
            'formPackStockType': form.step3.pack_stock_type,
            'formStep3': form.step3,
            'formCombinations': formCombinations,
            'has_combinations': has_combinations,
            'max_upload_size': max_upload_size
          })
        }}
      {% endblock %}
    </div>

    {% if not editable %} </fieldset> {% endif %}
  </form>
{% endblock %}

{% block javascripts %}
  {{ parent() }}

  <script src="{{ asset('themes/new-theme/public/product_page.bundle.js') }}"></script>
  <script src="{{ asset('../js/tiny_mce/tiny_mce.js') }}"></script>
  <script src="{{ asset('../js/admin/tinymce.inc.js') }}"></script>
  <script src="{{ asset('../js/admin/tinymce_loader.js') }}"></script> 
  
{% endblock %}

{% set js_translatable = {
"Are you sure to disable variations ? they will all be deleted": "This will delete all the combinations. Do you wish to proceed?"|trans({}, 'Admin.Catalog.Notification'),
}|merge(js_translatable) %}

{% set js_translatable = {
"Form update success": "Settings updated."|trans({}, 'Admin.Notifications.Success'),
"Form update errors": "Unable to update settings."|trans({}, 'Admin.Notifications.Error'),
"Delete": "Delete"|trans({}, 'Admin.Actions'),
"ToLargeFile": "The file is too large. Maximum size allowed is: [1]. The file you are trying to upload is [2]."|trans({}, 'Admin.Notifications.Error')|replace({ '[1]': '{{maxFilesize}}', '[2]': '{{filesize}}' }),
"Drop images here": "Drop images here"|trans({}, 'Admin.Catalog.Feature'),
"or select files": "or select files"|trans({}, 'Admin.Catalog.Feature'),
"files recommandations": "Recommended size 800 x 800px for default theme."|trans({}, 'Admin.Catalog.Feature'),
"files recommandations2": "JPG, GIF or PNG format."|trans({}, 'Admin.Catalog.Feature'),
"Cover": "Cover"|trans({}, 'Admin.Catalog.Feature'),
"Are you sure to delete this?": "Are you sure to delete this?"|trans({}, 'Admin.Notifications.Warning'),
"This will delete the specific price. Do you wish to proceed?": "This will delete the specific price. Do you wish to proceed?"|trans({}, 'Admin.Catalog.Notification'),
"Quantities": "Quantities"|trans({}, 'Admin.Catalog.Feature'),
"Combinations": "Combinations"|trans({}, 'Admin.Catalog.Feature'),
"Virtual product": "Virtual product"|trans({}, 'Admin.Catalog.Feature'),
"tax incl.": "tax incl."|trans({}, 'Admin.Catalog.Feature'),
"tax excl.": "tax excl."|trans({}, 'Admin.Catalog.Feature'),
"You can't create pack product with variations. Are you sure to disable variations ? they will all be deleted.": "A pack of products can't have combinations."|trans({}, "Admin.Catalog.Notification") ~ ' ' ~ js_translatable['Are you sure to disable variations ? they will all be deleted'],
"You can't create virtual product with variations. Are you sure to disable variations ? they will all be deleted.": "A virtual product can't have combinations."|trans({}, "Admin.Catalog.Notification") ~ ' ' ~ js_translatable['Are you sure to disable variations ? they will all be deleted'],
}|merge(js_translatable) %}
